/*
    jQuery Number Validation Plugin v1.0.1
    copyright: Alexander Perucci
    site: alexanderperucci.com
    license: Mozilla Public License Version 2.0
*/

(function(e){function t(t,n){n=n=="rgb(0, 0, 0)"?"":n;var r={rules:{type:"integer",required:false,maxvalue:undefined,minvalue:undefined,decimals:undefined,length:undefined},messages:{type:"",required:"",maxvalue:"",minvalue:"",decimals:"",length:""},settingserror:{setting:true,tooltipplacement:"bottom",tooltiptrigger:"hover",bordercolorok:n,bordercolornotok:"red"}};return e.extend(true,r,t)}function n(e,t,n){if(n.settingserror.setting){if(t){e.css("border-color",n.settingserror.bordercolorok);e.tooltip("destroy")}}}function r(e,t,n){if(n.settingserror.setting){e.css("border-color",n.settingserror.bordercolornotok);e.tooltip("destroy");e.tooltip({placement:n.settingserror.tooltipplacement,trigger:n.settingserror.tooltiptrigger,title:t})}}function i(e,t){if(e!=undefined){if(e&&t==""){return false}else{return true}}return true}function s(e,t){if(e!=undefined){var t=t.replace("-","").split(".")[0];if(t.length>e){return false}else{return true}}return true}function o(e,t){if(e!=undefined){var n=t.split(".")[1];if(n!=undefined&&n.length<=e){return true}else{return false}}return true}function u(e,t){if(e!=undefined){if(t=="")return true;if(parseFloat(t)<=parseFloat(e)){return true}else{return false}}return true}function a(e,t){if(e!=undefined){if(t=="")return true;if(parseFloat(t)>=parseFloat(e)){return true}else{return false}}return true}function f(e,t){var n=t.rules.required;var r=t.rules.maxvalue;var o=t.rules.minvalue;var f=t.rules.length;if(!i(n,e)){return{valid:false,message:t.messages.required}}if(e==undefined||e==""){return{valid:true}}var l=new RegExp("^[-]?(0|[1-9][0-9]*)$");if(!l.test(e)){return{valid:false,message:t.messages.type}}if(!s(f,e)){return{valid:false,message:t.messages.length}}if(!u(r,e)){return{valid:false,message:t.messages.maxvalue}}if(!a(o,e)){return{valid:false,message:t.messages.minvalue}}return{valid:true}}function l(e,t){var n=t.rules.required;var r=t.rules.decimals;var f=t.rules.maxvalue;var l=t.rules.minvalue;var c=t.rules.length;if(!i(n,e)){return{valid:false,message:t.messages.required}}if(e==undefined||e==""){return{valid:true}}var h=new RegExp("^[-]?(0|[1-9][0-9]*)(\\.[0-9]+)?$");if(!h.test(e)){return{valid:false,message:t.messages.type}}if(!o(r,e)){return{valid:false,message:t.messages.decimals}}if(!s(c,e)){return{valid:false,message:t.messages.length}}if(!u(f,e)){return{valid:false,message:t.messages.maxvalue}}if(!a(l,e)){return{valid:false,message:t.messages.minvalue}}return{valid:true}}e.fn.masknumber=function(i){var s=t(i,e(this).css("border-color"));e(this).data("NumberPlugin",s);return this.on("keyup",function(t){t.preventDefault();var i;switch(true){case/integer/.test(s.rules.type):i=f(e(this).val(),s);break;case/double/.test(s.rules.type):i=l(e(this).val(),s);break;default:break}!i.valid?r(e(this),i.message,s):n(e(this),true,s);e(this).focus()})};e.fn.validnumber=function(i){var s=true;for(var o=0;o<this.length;o++){var u;if(i==undefined||e.isEmptyObject(i)){u=e(this[o]).data("NumberPlugin")}else{u=t(i,e(this[o]).css("border-color"))}var a;switch(true){case/integer/.test(u.rules.type):a=f(e(this[o]).val(),u);break;case/double/.test(u.rules.type):a=l(e(this[o]).val(),u);break;default:break}!a.valid?r(e(this[o]),a.message,u):n(e(this[o]),false,u);!a.valid?s=false:true}return s}})(jQuery)
